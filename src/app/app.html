<div class="min-h-screen flex flex-col bg-white dark:bg-slate-950">
  <header class="border-b border-slate-200/70 dark:border-slate-800/70 bg-white/70 dark:bg-slate-950/50 backdrop-blur sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a routerLink="/" class="flex items-center gap-3 group">
        <span class="text-2xl">ðŸ¦¨</span>
        <span class="font-extrabold tracking-tight text-slate-900 dark:text-white text-lg">
          <span class="group-hover:text-brand-600 transition">Skunk</span> AI
        </span>
      </a>
      <div class="flex items-center gap-2">
        <button class="btn-ghost lg:hidden" (click)="toggleDrawer()" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>

        <!-- Desktop secondary controls -->
        <div class="hidden lg:flex items-center gap-3">
          <label class="text-xs text-slate-500">Model</label>
          <select [(ngModel)]="selectedModel" (change)="onModelChange($event)" class="rounded-md border px-2 py-1 bg-white/80 dark:bg-slate-900/60">
            <option *ngFor="let m of models" [value]="m.id">{{m.name}}</option>
          </select>
          <button class="btn-ghost" (click)="tokenModalOpen = true">Manage Tokens</button>
          <button type="button" class="btn-ghost" (click)="toggleTheme()" aria-label="Toggle theme">
            <svg class="h-5 w-5 hidden dark:block" viewBox="0 0 24 24" fill="currentColor"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8 8 0 1 1-9.45-9.45 1 1 0 0 0-.14-2A10 10 0 1 0 23 13.81a1 1 0 0 0-1.36-.81z"/></svg>
            <svg class="h-5 w-5 dark:hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.79 1.8-1.79zM1 13h3v-2H1v2zm10 10h2v-3h-2v3zm9.83-18.16l-1.79-1.79-1.8 1.79 1.8 1.79 1.79-1.79zM17 13h6v-2h-6v2zM4.84 19.16l1.79 1.79 1.8-1.79-1.8-1.79-1.79 1.79zM11 7a5 5 0 105 5 5 5 0 00-5-5z"/></svg>
          </button>
        </div>
      </div>

      <!-- Drawer -->
      <div *ngIf="drawerOpen" class="fixed inset-0 z-40 flex">
        <div class="w-64 bg-white dark:bg-slate-900 border-r border-slate-200/60 dark:border-slate-800/60 p-4">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-3">
              <span class="text-2xl">ðŸ¦¨</span>
              <div class="font-semibold">Skunk AI</div>
            </div>
            <button class="btn-ghost" (click)="closeDrawer()">Close</button>
          </div>
          <nav class="space-y-2">
            <a (click)="closeDrawer()" routerLink="/" class="block p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800">Home</a>
            <a (click)="closeDrawer()" routerLink="/playground" class="block p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800">Playground</a>
            <a (click)="closeDrawer()" routerLink="/playground" class="block p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800">Launch App</a>
            <a (click)="closeDrawer()" href="#credits" class="block p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800">Credits</a>
          </nav>

          <div class="mt-6">
            <label class="text-xs text-slate-400">Model</label>
            <select [(ngModel)]="selectedModel" (change)="onModelChange($event)" class="mt-2 w-full rounded-md border px-2 py-1 bg-white/80 dark:bg-slate-900/60">
              <option *ngFor="let m of models" [value]="m.id">{{m.name}}</option>
            </select>
            <button class="btn-ghost mt-3 w-full" (click)="tokenModalOpen = true">Manage Tokens</button>
          </div>
        </div>
        <div class="flex-1" (click)="closeDrawer()"></div>
      </div>
    </div>
  </header>

  <main class="flex-1">
    <router-outlet />
  </main>

  <footer class="border-t border-slate-200/70 dark:border-slate-800/70">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between text-sm text-slate-500">
      <p>Â© {{ currentYear }} Skunk AI</p>
      <div class="flex items-center gap-3">
        <a routerLink="/playground" class="hover:text-slate-700 dark:hover:text-slate-300">Status</a>
        <a routerLink="/playground" class="hover:text-slate-700 dark:hover:text-slate-300">Privacy</a>
      </div>
    </div>
  </footer>

  <!-- Token manager modal -->
  <div *ngIf="tokenModalOpen" class="fixed inset-0 z-50 flex items-center justify-center bg-black/40">
    <div class="bg-white dark:bg-slate-900 rounded-2xl w-full max-w-xl p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Hugging Face Tokens</h3>
        <button class="text-sm text-slate-500" (click)="closeTokenModal()">Close</button>
      </div>
      <p class="text-sm text-slate-500 mb-4">Add your fine-grained Hugging Face tokens. Tokens are stored locally in your browser.</p>
      <div class="flex gap-2 mb-4">
        <input [(ngModel)]="tokensInput" class="flex-1 rounded-md border px-3 py-2 bg-white/90 dark:bg-slate-800/40" placeholder="hf_..." />
        <button class="btn-primary" (click)="addToken()">Add</button>
      </div>
      <div class="space-y-2 max-h-40 overflow-auto">
        <div *ngFor="let t of tokens; let i = index" class="flex items-center justify-between p-2 rounded-md border">
          <div class="text-sm truncate">{{t}}</div>
          <div class="flex items-center gap-2">
            <button class="btn-ghost" (click)="removeToken(i)">Remove</button>
          </div>
        </div>
        <div *ngIf="tokens.length === 0" class="text-xs text-slate-400">No tokens configured.</div>
      </div>
      <div class="mt-4 text-xs text-slate-500">Tip: Provide tokens with minimal scopes. Rotation happens automatically when calls fail.</div>
    </div>
  </div>

</div>
